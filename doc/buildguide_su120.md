# Build Guide - SU120 Customize

![trackball_module_main00](/images/main_03.jpg)

meishi trackball moduleをモジュールとして他のキーボードに接続する作例を紹介します。
トラックボールモジュールをキーボードに接続する条件は下記になります。

- GPIOピンに3ピン以上空きがあること
- 5V電源のProMicro互換機であること（3.3V電源の機器を用いる場合はレベル変換が必要になります。）

ここでは様々なレイアウトのスタディを行う事に長けているSU120を用いて、トラックボール付きのマクロパッドを作成します。


## 部品

meishi trackball moduleのベースキットの他に、下記パーツを用います。ご自身のレイアウトに応じて適宜数字を読み替えてください。

|名前|数|備考|
|---|---|---|
|SU120基板|適宜||
|M1.4ねじ 5mm|適宜||
|M1.4ねじ 8mm|2～4本||
|M1.4ナット|適宜||
|MicroUSB or USB-TypeCケーブル|1本||
|ProMicro|1個||
|コンスル― or ピンヘッダ（2.5mm×12ピン）|2本||
|キースイッチ|適宜|MX互換 or Choc v1|
|キーキャップ|適宜|MX互換 or Choc v1|
|ロータリーエンコーダ（EC12互換）|0～4個||
|ロータリーエンコーダ用ノブ|0～4個||
|リセットスイッチ|1個||
|34mmボール|1個||

上記パーツは[遊舎工房](https://shop.yushakobo.jp/)、[TALP KEYBOARD](https://talpkeyboard.net/)、[Daily Craft Keyboard](https://shop.dailycraft.jp/)などで揃えることが可能です。また、18mm径ノブは[へちょあまの工房＠たねやつ支店](https://taneyats.booth.pm/items/3512697)での品揃えが豊富です。

各ショップの在庫状況に応じて検討ください。


## 組み立て
### 0. レイアウト検討

  まずはどんなレイアウトのマクロパッドを作成するか検討します。trackball moduleは2u×2uサイズで設計されているので、4キー分のスペースにちょうどおさまります。

  ![su120_bg_01](/images/su120_bg_01.jpg)

  今回は2×3の6キー+ロータリーエンコーダ2個のレイアウトで進めます。SU120の基板を切り離し、やすりなどでバリを取っておきます。

  ![su120_bg_02](/images/su120_bg_02.jpg)

### 1. パーツ類はんだ付け

  ソケット、ダイオード、ロータリーエンコーダ、ジャンパーなど必要箇所のはんだ付けを行います。SU120のビルドガイドや作例を参考にしてください。

  ![su120_bg_03](/images/su120_bg_03.jpg)

### 2. 組み立て

  SU120の基板とトラックボールモジュールを固定します。SU120の基板に付属しているビスケットを用いて固定します。今回は格子配列のため1u Linearと書かれたビスケットを3つ用いています。

  ![su120_bg_04](/images/su120_bg_04.jpg)

  SU120の基板とトラックボールモジュールが接する部分はM1.4ねじ 8mm＋M1.4ナットでビスケットを固定します。SU120と接続しないトラックボールモジュールのねじ穴は通常通りM2ねじ 6mm＋M2ナットで固定します。  
  M1.4ねじ 8mmは[こちら](https://wilco.jp/products/F/F-EB-03.html#page1)がおすすめです。トラックボールホルダーのねじ穴がM2用に設計されているので、ねじ頭が2.5mm以上のものが望ましいです。

  ![su120_bg_05](/images/su120_bg_05.jpg)

### 3. センサー接続

  トラックボールモジュールのピンとSU120をケーブルで接続します。下記5本の接続が必要になります。

    - VCC
    - SDIO
    - SCLK
    - NCS
    - GND

  VCCとGNDはLED用のパッドかTRRSジャックのスルーホールにケーブルをはんだ付けするのが簡単です。

  それ以外の3ピンは、ファーム上で設定する空きピンに対応したピンに接続するようにしてください。空きピンとなる3ピンは、SU120の回路図を見ながら自分の選んだレイアウトに応じて選択してください。

  ![su120_bg_06](/images/su120_bg_06.jpg)

  ![su120_bg_07](/images/su120_bg_07.jpg)

  ![su120_bg_08](/images/su120_bg_08.jpg)

  最後にキースイッチ、キーキャップ、ロータリーエンコーダ、トラックボールなどをはめて完成です。

  ![su120_bg_09](/images/su120_bg_09.jpg)


## ファームウェア

  SU120のものをベースに書き換えます。[こちら]()を参考に、自身のレイアウトに合わせてファームウェアの更新を行い、ProMicroに書き込みを行ってください。

  meishi trackball moduleやcocot46plus同様にカスタムキーコードによってトラックボールの状態を変更することも可能です。

## 終わりに

  何かトラブルがあれば[Twitterアカウント](https://twitter.com/aki27kbd)までご連絡ください。

  また、完成写真をSNSにアップいただけるととても励みになります。（アップするのがはばかられる方はDMで直接送りつけていただいても構いません。）

ハッシュタグは #trackball_module です。
